<!DOCTYPE html>
<html ng-app="myApp" ng-controller="mainCtrl" ng-init="init(false);">

<head>
	<title>412 - Traffic Accidents</title>
	<meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=1.0, user-scalable=no">
</head>

<body>
	<img class="agency-logo" src="./images/agency.png" alt="AGENCY 9-1-1" style="width:132px;height:132px;">
	<div id="sidebar" class="sidebar collapsed">
		<!-- Nav tabs -->
		<div class="sidebar-tabs">
			<ul role="tablist">
				<li><a ng-click="AppData.Page = 'homeCtrl'" href="#home" role="tab" title="Info"><i
							class="fa fa-bars"></i></a></li>
				<li><a ng-click="AppData.Page = 'homeCtrl'" href="#table" role="tab" title="Info"><i
							class="fa fa-table"></i></a></li>
			</ul>

			<ul role="tablist">
				<li><a ng-click="AppData.Page = 'settingsCtrl'" href="#settings" role="tab" title="Settings"><i
							class="fas fa-cogs"></i></a></li>
			</ul>
		</div>

		<!-- Tab panes -->
		<div class="sidebar-content">
			<div class="sidebar-pane" id="home">
				<h1 class="sidebar-header">
					Traffic Accidents
					<span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
				</h1>
				<br />
				<h3>Welcome!</h3>
				<br />
				<h3>Filter Options:</h3>

				<h4>By Area:
					<br />
					<i class="fas fa-map-marked-alt apply" ng-click="PlaceRadiusMarker()"></i>
					<i class="far fa-times-circle apply" ng-click="RemoveRadiusMarker()"></i>

				</h4>
				<br />
				<h4>By Date:
					<br />

					<md-datepicker ng-model="DateFrom" md-placeholder="Enter date" md-hide-icons="calendar"
						md-min-date="MinDate" md-max-date="MaxDate" input-aria-describedby="datepicker-description"
						input-aria-labelledby="datepicker-header ">
					</md-datepicker>

					&ndash;

					<md-datepicker ng-model="DateTo" md-placeholder="Enter date" md-hide-icons="calendar"
						md-min-date="MinDate" md-max-date="MaxDate" input-aria-describedby="datepicker-description"
						input-aria-labelledby="datepicker-header ">
					</md-datepicker>

					<h3>
						<i class="far far fa-calendar-check apply" ng-click="ApplyDateFilter()"></i>
						<i class="far fa-calendar-times remove" ng-click="ResetDateFilter()"></i>
					</h3>
				</h4>
			</div>

			<div class="sidebar-pane" id="table">
				<h1 class="sidebar-header">
					Accident Information Table
					<span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
				</h1>
				<br />
				<div>
					<div class="float-left">
						<button class="btn btn-info float-left" ng-disabled="currentPage == 0"
							ng-click="currentPage = currentPage - 1">
							<i class="fas fa-caret-left nested-white"></i>
						</button>

						<h5 class="inline-hdr">&ensp;{{currentPage + 1}}/{{numberOfPages()}}&ensp;</h5>

						<button class="btn btn-info float-right"
							ng-disabled="currentPage >= MainDataTable.length / pageSize - 1"
							ng-click="currentPage = currentPage + 1">
							<i class="fas fa-caret-right nested-white"></i>
						</button>
					</div>
					<br />
					<br />
					<br />

					<table class="table table-striped table-bordered table-hover table-sizing">
						<thead>
							<tr>
								<th></th>
								<th ng-repeat="hdr in TableHeaders">{{ hdr }}</th>
							</tr>
						</thead>

						<tbody>
							<tr
								ng-repeat-start="x in (MainDataTable = CurrentData) | startFrom:currentPage * pageSize | limitTo:pageSize">
								<td>
									<span ng-show="x.incidentid !== CurrentlySelectedCall"
										ng-click="GetCallData(x.incidentid)" class="fa fa-caret-right"></span>
									<span ng-show="x.incidentid === CurrentlySelectedCall"
										ng-click="GetCallData(x.incidentid)" class="fa fa-caret-down"></span>
								</td>
								<td>{{ x.received }}</td>
								<td>{{ x.callnum }}</td>
								<td>{{ x.description }}</td>
								<td>{{ x.address }}</td>
							</tr>

							<tr ng-if="x.incidentid === CurrentlySelectedCall">
								<td>Unit</td>
								<td>Dispatched</td>
								<td>En-route</td>
								<td>On-scene</td>
								<td>Clear</td>
							</tr>

							<tr ng-if="x.incidentid === CurrentlySelectedCall" ng-repeat-end
								ng-repeat="unit in RawUnitData">
								<td>{{ unit.name }}</td>
								<td>{{ unit.dispatched }}</td>
								<td>{{ unit.enroute }}</td>
								<td>{{ unit.onscene }}</td>
								<td>{{ unit.clear }}</td>
							</tr>

						</tbody>
					</table>
				</div>
			</div>


			<div class="sidebar-pane" id="settings">
				<h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
				</h1>
				<br />
				<br />
				<p> Radius: <input ng-model="cfg.radius" type="number" id="range" name="range" min="0" max="100"></p>
				<p> maxOpacity: <input ng-model="cfg.maxOpacity" type="number" id="CfgOpacity" name="CfgOpacity" min="0"
						max="100"></p>
				<p> scaleRadius: <input ng-model="cfg.scaleRadius" type="checkbox" id="CfgScaleRadius"
						name="CfgScaleRadius"></p>
				<p> useLocalExtrema: <input ng-model="cfg.useLocalExtrema" type="checkbox" id="CfgExtreme"
						name="CfgExtreme"></p>
				<button ng-click="ApplyCfg()">Apply</button>
			</div>
		</div>
	</div>


	<div id="map" class="sidebar-map"></div>

	<link rel="stylesheet" href="./css.php">
	<script src="./js.php"></script>
</body>

</html>
